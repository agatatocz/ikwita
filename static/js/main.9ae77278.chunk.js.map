{"version":3,"sources":["settings/theme.ts","services/auth.ts","utils/toast.ts","utils/index.ts","services/http.ts","services/registerUser.ts","services/checkIfUserExists.ts","services/index.ts","services/login.ts","services/wallets.ts","services/groups.ts","services/groupExpenses.ts","services/categories.ts","services/expenses.ts","services/incomes.ts","components/Context/dataMappers.ts","components/Context/DataProvider.tsx","components/shered/Header.tsx","components/shered/Menu.tsx","settings/tableLocalization.ts","components/Wallet/PrivateWallet/Table.tsx","components/shered/LoadingButton.tsx","components/shered/DatePicker.tsx","components/shered/PieChart.tsx","components/shered/Categories.tsx","components/shered/Footer/DeleteWalletButton.tsx","components/shered/Footer/ChangeNameButton.tsx","components/shered/Footer/index.tsx","components/Wallet/PrivateWallet/PrivateWalletDumb.tsx","components/Wallet/PrivateWallet/index.tsx","components/Wallet/SheredWallet/ExpensesTab/UsersCheckbox.tsx","components/Wallet/SheredWallet/ExpensesTab/Table.tsx","components/Wallet/SheredWallet/ExpensesTab/index.tsx","components/Wallet/SheredWallet/UsersTab/index.tsx","components/Wallet/SheredWallet/index.tsx","components/shered/LoadingWrapper.tsx","components/Wallet/index.tsx","components/NewWalletCreator/AddUsersTable.tsx","components/NewWalletCreator/index.tsx","utils/constants.ts","components/Login/LoginForm.tsx","components/Register/ValidationSummary.tsx","utils/validationPatterns.ts","components/Register/RegisterForm.tsx","components/shered/ProtectedRoute.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["theme","createMuiTheme","palette","background","default","primary","main","secondary","error","setToken","token","sessionStorage","setItem","getToken","getItem","toast","message","title","iZtoast","position","success","dateToYYYYMMDD","date","day","getDate","month","getMonth","year","getFullYear","filterById","array","id","filter","item","indexOfById","findIndex","findById","find","instance","axios","create","baseURL","interceptors","request","use","config","headers","authorization","response","data","value","console","log","String","info","Promise","reject","http","endpoints","registerUser","username","mail","password","post","checkIfUserExists","userName","get","params","services","login","getWallets","walletId","dateFrom","dateTo","ID","getGroups","groupID","addWallet","name","currency","deleteWallet","editWallet","addGroup","ownerName","usersName","addUsersToGroup","groupId","usersname","deleteUsersFromGroup","put","deleteGroup","editGroup","addGroupExpense","categoryID","checkUserInGroupExpense","expenseId","groupExpensesID","editGroupExpense","expenseID","deleteGroupExpense","addCategoryOfExpense","editCategoryOfExpense","deleteCategoryOfExpense","addCategoryOfIncome","editCategoryOfIncome","deleteCategoryOfIncome","addExpense","walletID","editExpense","deleteExpense","addIncome","editIncome","incomeID","deleteIncome","nullCategory","mapPrivateWallets","walletJSONs","map","wallet","isPrivate","expenses","replaceNullCategories","incomes","expensesCategories","incomesCategories","mapPrivateWallet","mapSheredWallets","result","categories","expencesCategories","mapSheredWallet","category","replaceCategoryWithNullCategory","categoryId","indexOfSheredWallet","wallets","AppContext","createContext","DataProvider","withRouter","children","history","useState","user","appState","setAppState","loading","setLoading","setWallets","setUsersData","useCallback","a","jwt_decode","email","userID","groups","then","finally","useEffect","addPrivateWallet","index","splice","push","routes","w","addSheredWallet","usersNames","apiCall","length","newWallet","newName","context","doLogIn","doLogOut","removeItem","empty","getWallet","setWalletDataByDate","addCategory","isIncome","editCategory","categoryOfIncomes","cat","forEach","income","categoryOfExpenses","expense","deleteCategory","expenseData","sumExpenses","incomeData","sumIncomes","addUser","userData","users","deleteUser","findExpense","owner","Provider","useStyles","makeStyles","createStyles","appBar","padding","display","justifyContent","alignItems","flexWrap","breakpoints","down","logo","fontFamily","color","letterSpacing","usernameContainer","textAlign","width","marginTop","logoutButton","marginLeft","Header","React","classes","AppBar","className","Typography","variant","Button","onClick","component","Link","to","icon","marginRight","Menu","match","path","useContext","tabIndex","setTabIndex","hasOwnProperty","Tabs","indicatorColor","onChange","event","newTabIndex","scrollButtons","Tab","label","key","tableLocalization","body","emptyDataSourceMessage","addTooltip","deleteTooltip","editTooltip","filterRow","filterTooltip","editRow","deleteText","cancelTooltip","saveTooltip","grouping","placeholder","groupedBy","header","actions","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","toolbar","addRemoveColumns","nRowsSelected","showColumnsTitle","showColumnsAriaLabel","exportTitle","exportAriaLabel","exportName","searchTooltip","searchPlaceholder","Table","onAdd","onEdit","onDelete","columns","field","editComponent","props","format","defaultSort","lookup","getCategoriesLookup","validate","localization","options","actionsColumnIndex","editable","onRowAdd","newData","Date","handleAdd","onRowUpdate","oldData","handleEdit","onRowDelete","loader","LoadingButton","text","rest","disabled","CircularProgress","size","container","flexDirection","marginBottom","formField","margin","DatePicker","onDatesSubmit","startDate","setStartDate","endDate","setEndDate","maxDate","minDate","start","end","mapDataForPieChart","grouped","groupBy","Object","keys","reduce","prev","current","mapDataForPieChartPerUser","valuePerUser","PieChart","isPerUser","top","right","bottom","left","innerRadius","padAngle","cornerRadius","colors","scheme","borderWidth","borderColor","from","modifiers","radialLabelsSkipAngle","radialLabelsTextXOffset","radialLabelsTextColor","radialLabelsLinkOffset","radialLabelsLinkDiagonalLength","radialLabelsLinkHorizontalLength","radialLabelsLinkStrokeWidth","radialLabelsLinkColor","slicesLabelsSkipAngle","slicesLabelsTextColor","animate","motionStiffness","motionDamping","legends","anchor","direction","translateY","itemWidth","itemHeight","itemTextColor","symbolSize","symbolShape","effects","on","style","table","minWidth","Categories","openCategories","setOpenCategories","toggleCategories","Dialog","onClose","open","button","DeleteWalletButton","walletName","setOpen","closeDialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","ChangeNameButton","setName","TextField","fullWidth","target","footer","borderTop","Footer","sum","pieChartContainer","height","flex","PrivateWalletDumb","isExpenses","PrivateWallet","UsersCheckbox","checkMap","loadingMap","setLoadingMap","loadingMapCopy","handleChagne","FormGroup","isOwner","checked","FormControlLabel","control","Checkbox","currentUser","render","rowData","customSort","b","values","isEditable","isDeletable","round","flexSpace","flexCenter","ExpensesTab","dataForUser","sumForUser","curr","UsersTab","catch","SheredWallet","withLoading","Component","Wallet","setWallet","AddUsersTable","setUsers","newUsers","tableData","editUser","resolve","radioGroupContainer","maxWidth","buttonContainer","NewWalletCreator","nameError","setNameError","type","setType","trim","Card","onSubmit","preventDefault","helperText","RadioGroup","Radio","link","light","LoginForm","setUsername","setPassword","Container","e","status","required","currentTarget","register","ValidationSummary","regExp","emailTemplate","arrowContainer","paddingLeft","RegisterForm","setEmail","pass1","setPass1","pass2","setPass2","setError","test","ProtectedRoute","PlLocalizedUtils","locale","plLocale","DateFnsUtils","App","basename","ThemeProvider","utils","CssBaseline","routeProps","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","document","getElementById","URL","process","href","origin","addEventListener","fetch","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.9ae77278.chunk.js","sourcesContent":["import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    background: {\r\n      default: \"#eee\",\r\n    },\r\n    primary: {\r\n      main: \"#7FCDBB\",\r\n    },\r\n    secondary: {\r\n      main: \"#0f0f0f\",\r\n    },\r\n    error: {\r\n      main: \"#f44336\",\r\n    },\r\n  },\r\n});\r\n","const JWT = \"jwt\";\r\n\r\nexport interface DecodedJwt {\r\n  username: string;\r\n  email: string;\r\n  userID: string;\r\n}\r\nexport const setToken = (token: string) => {\r\n  sessionStorage.setItem(JWT, token);\r\n};\r\nexport const getToken = () => sessionStorage.getItem(JWT);\r\nexport const removeToken = () => sessionStorage.removeItem(JWT);\r\nexport const isLoggedIn = () => !!getToken();\r\n","import \"izitoast/dist/css/iziToast.min.css\";\r\nimport iZtoast from \"izitoast\";\r\n\r\nexport const toast = {\r\n  error: (message: string, title = \"Error\") => {\r\n    return iZtoast.error({\r\n      title,\r\n      message,\r\n      position: \"bottomCenter\",\r\n    });\r\n  },\r\n  success: (message: string, title = \"Success\") => {\r\n    return iZtoast.success({\r\n      title,\r\n      message,\r\n      position: \"bottomCenter\",\r\n    });\r\n  },\r\n};\r\n","import { findIndex } from \"lodash\";\r\n\r\nexport const isString = (value: any) =>\r\n  typeof value === \"string\" || value instanceof String;\r\n\r\nexport const dateToYYYYMMDD = (date: Date): string => {\r\n  const day = date.getDate();\r\n  let month: string | number = date.getMonth() + 1;\r\n  if (month < 10) month = `0${month}`;\r\n  const year = date.getFullYear();\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\nexport const filterById = (array: Array<any>, id: string | number) =>\r\n  array.filter((item) => `${item.id}` !== `${id}`);\r\n\r\nexport const indexOfById = (array: Array<any>, id: number | string) =>\r\n  findIndex(array, (item: any) => `${item.id}` === `${id}`);\r\n\r\nexport const findById = (array: Array<any>, id: string | number) =>\r\n  array.find((item) => `${item.id}` === `${id}`);\r\n","import axios from \"axios\";\r\nimport { getToken } from \"services/auth\";\r\nimport { toast } from \"utils/toast\";\r\nimport { isString } from \"utils\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: \"https://ikwita-api.azurewebsites.net\",\r\n});\r\n\r\ninstance.interceptors.request.use((config) => {\r\n  const token = getToken();\r\n  config.headers.authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\ninstance.interceptors.response.use(\r\n  (response) => {\r\n    if (response.data.message) toast.success(response.data.message);\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.log({ ...error });\r\n    if (error.response && error.response.data && isString(error.response.data))\r\n      toast.error(error.response.data);\r\n    else if (error.response && error.response.data && error.response.data.info)\r\n      toast.error(error.response.data.info);\r\n    else if (\r\n      error.response &&\r\n      error.response.data &&\r\n      error.response.data.message\r\n    )\r\n      toast.error(error.response.data.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const http = instance;\r\nexport const endpoints = {\r\n  register: \"/account/register\",\r\n  login: \"/account/login\",\r\n  exist: \"/account/exist\",\r\n  wallets: \"/wallets\",\r\n  groups: \"/groups\",\r\n  groupsGet: \"/groups/get\",\r\n  groupsAddUsers: \"/groups/addUsers\",\r\n  groupsDeleteUsers: \"/groups/deleteUser\",\r\n  addWallet: \"/wallets/add\",\r\n  deleteWallet: \"/wallets/remove\",\r\n  editWallet: \"/wallets/edit\",\r\n  addGroups: \"/groups/add\",\r\n  deleteGroup: \"/groups/remove\",\r\n  editGroup: \"/groups/edit\",\r\n  addGroupExpense: \"/groupExpenses/add\",\r\n  editGroupExpense: \"/groupExpenses/edit\",\r\n  deleteGroupExpense: \"/groupExpenses/remove\",\r\n  billingGroupExpenses: \"/billingGroupExpenses\",\r\n  addCategoryOfExpenses: \"/categoriesOfExpenses/add\",\r\n  editCategoryOfExpenses: \"/categoriesOfExpenses/edit\",\r\n  deleteCategoryOfExpenses: \"/categoriesOfExpenses/remove\",\r\n  addCategoryOfIncomes: \"/categoriesOfIncomes/add\",\r\n  editCategoryOfIncomes: \"/categoriesOfIncomes/edit\",\r\n  deleteCategoryOfIncomes: \"/categoriesOfIncomes/remove\",\r\n  addExpense: \"/expenses/add\",\r\n  editExpense: \"/expenses/edit\",\r\n  deleteExpense: \"/expenses/remove\",\r\n  addIncome: \"/incomes/add\",\r\n  editIncome: \"/incomes/edit\",\r\n  deleteIncome: \"/incomes/remove\",\r\n};\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const registerUser = (\r\n  username: string,\r\n  mail: string,\r\n  password: string\r\n) =>\r\n  http.post(endpoints.register, {\r\n    username,\r\n    mail,\r\n    password,\r\n  });\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const checkIfUserExists = (userName: string) =>\r\n  http.get(endpoints.exist, {\r\n    params: {\r\n      username: userName,\r\n    },\r\n  });\r\n","import { http } from \"./http\";\r\nimport { login } from \"./login\";\r\nimport { registerUser } from \"./registerUser\";\r\nimport { getWallets, addWallet, deleteWallet, editWallet } from \"./wallets\";\r\nimport {\r\n  getGroups,\r\n  addGroup,\r\n  addUsersToGroup,\r\n  deleteGroup,\r\n  editGroup,\r\n  deleteUsersFromGroup,\r\n} from \"./groups\";\r\nimport { checkIfUserExists } from \"./checkIfUserExists\";\r\nimport {\r\n  addGroupExpense,\r\n  checkUserInGroupExpense,\r\n  editGroupExpense,\r\n  deleteGroupExpense,\r\n} from \"./groupExpenses\";\r\nimport { addExpense, editExpense, deleteExpense } from \"./expenses\";\r\nimport { addIncome, editIncome, deleteIncome } from \"./incomes\";\r\nimport {\r\n  addCategoryOfExpense,\r\n  editCategoryOfExpense,\r\n  deleteCategoryOfExpense,\r\n  addCategoryOfIncome,\r\n  editCategoryOfIncome,\r\n  deleteCategoryOfIncome,\r\n} from \"./categories\";\r\n\r\nexport const services = {\r\n  http,\r\n  login,\r\n  registerUser,\r\n  getWallets,\r\n  getGroups,\r\n  addWallet,\r\n  deleteWallet,\r\n  editWallet,\r\n  addGroup,\r\n  addUsersToGroup,\r\n  deleteUsersFromGroup,\r\n  deleteGroup,\r\n  editGroup,\r\n  checkIfUserExists,\r\n  addGroupExpense,\r\n  checkUserInGroupExpense,\r\n  editGroupExpense,\r\n  deleteGroupExpense,\r\n  addCategoryOfExpense,\r\n  editCategoryOfExpense,\r\n  deleteCategoryOfExpense,\r\n  addCategoryOfIncome,\r\n  editCategoryOfIncome,\r\n  deleteCategoryOfIncome,\r\n  addExpense,\r\n  editExpense,\r\n  deleteExpense,\r\n  addIncome,\r\n  editIncome,\r\n  deleteIncome,\r\n};\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const login = (username: string, password: string) =>\r\n  http.post(endpoints.login, {\r\n    username,\r\n    password,\r\n  });\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const getWallets = (\r\n  userName: string,\r\n  walletId?: string,\r\n  dateFrom?: string,\r\n  dateTo?: string\r\n) =>\r\n  http.get(endpoints.wallets, {\r\n    params: {\r\n      userName,\r\n      ID: walletId,\r\n      dateFrom,\r\n      dateTo,\r\n    },\r\n  });\r\n\r\nexport const addWallet = (name: string, userName: string) =>\r\n  http.post(endpoints.addWallet, {\r\n    name,\r\n    userName,\r\n    currency: \"PLN\",\r\n  });\r\n\r\nexport const editWallet = (walletId: string, name: string) =>\r\n  http.post(`${endpoints.editWallet}?id=${walletId}`, {\r\n    name,\r\n  });\r\n\r\nexport const deleteWallet = (id: string) =>\r\n  http.get(endpoints.deleteWallet, {\r\n    params: {\r\n      id,\r\n    },\r\n  });\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const getGroups = (\r\n  userName: string,\r\n  groupID?: string,\r\n  dateFrom?: string,\r\n  dateTo?: string\r\n) =>\r\n  http.get(endpoints.groupsGet, {\r\n    params: {\r\n      userName,\r\n      groupID,\r\n      dateFrom,\r\n      dateTo,\r\n    },\r\n  });\r\n\r\nexport const addGroup = (\r\n  name: string,\r\n  ownerName: string,\r\n  usersName: string[]\r\n) =>\r\n  http.post(endpoints.addGroups, {\r\n    name,\r\n    ownerName,\r\n    usersName,\r\n    currency: \"PLN\",\r\n  });\r\n\r\nexport const addUsersToGroup = (groupId: string, usersName: string[]) =>\r\n  http.post(`${endpoints.groupsAddUsers}?id=${groupId}`, {\r\n    usersname: usersName,\r\n  });\r\n\r\nexport const deleteUsersFromGroup = (groupId: string, usersName: string[]) =>\r\n  http.put(`${endpoints.groupsDeleteUsers}?id=${groupId}`, {\r\n    usersname: usersName,\r\n  });\r\n\r\nexport const editGroup = (groupId: string, name: string) =>\r\n  http.post(`${endpoints.editGroup}?id=${groupId}`, {\r\n    name,\r\n  });\r\n\r\nexport const deleteGroup = (id: string) =>\r\n  http.get(endpoints.deleteGroup, {\r\n    params: {\r\n      id,\r\n    },\r\n  });\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const addGroupExpense = (\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number,\r\n  username: string,\r\n  groupID: string\r\n) =>\r\n  http.post(endpoints.addGroupExpense, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n    username,\r\n    groupID,\r\n  });\r\n\r\nexport const editGroupExpense = (\r\n  expenseID: number,\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number\r\n) =>\r\n  http.post(`${endpoints.editGroupExpense}?ID=${expenseID}`, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n  });\r\n\r\nexport const deleteGroupExpense = (expenseID: number) =>\r\n  http.get(`${endpoints.deleteGroupExpense}?ID=${expenseID}`);\r\n\r\nexport const checkUserInGroupExpense = (expenseId: number, username: string) =>\r\n  http.get(endpoints.billingGroupExpenses, {\r\n    params: {\r\n      groupExpensesID: expenseId,\r\n      username,\r\n    },\r\n  });\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const addCategoryOfExpense = (\r\n  name: string,\r\n  username: string,\r\n  groupID?: string\r\n) =>\r\n  http.post(endpoints.addCategoryOfExpenses, {\r\n    name,\r\n    username,\r\n    groupID,\r\n  });\r\n\r\nexport const editCategoryOfExpense = (\r\n  id: string | number,\r\n  name: string,\r\n  username: string,\r\n  groupID?: string\r\n) =>\r\n  http.post(`${endpoints.editCategoryOfExpenses}?id=${id}`, {\r\n    name,\r\n    username,\r\n    groupID,\r\n  });\r\n\r\nexport const deleteCategoryOfExpense = (id: string | number) =>\r\n  http.get(`${endpoints.deleteCategoryOfExpenses}?id=${id}`);\r\n\r\nexport const addCategoryOfIncome = (name: string, username: string) =>\r\n  http.post(endpoints.addCategoryOfIncomes, {\r\n    name,\r\n    username,\r\n  });\r\n\r\nexport const editCategoryOfIncome = (\r\n  id: string | number,\r\n  name: string,\r\n  username: string\r\n) =>\r\n  http.post(`${endpoints.editCategoryOfIncomes}?id=${id}`, {\r\n    name,\r\n    username,\r\n  });\r\n\r\nexport const deleteCategoryOfIncome = (id: string | number) =>\r\n  http.get(`${endpoints.deleteCategoryOfIncomes}?id=${id}`);\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const addExpense = (\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number,\r\n  walletID: string\r\n) =>\r\n  http.post(endpoints.addExpense, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n    walletID,\r\n  });\r\n\r\nexport const editExpense = (\r\n  expenseID: number,\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number,\r\n  walletID: string\r\n) =>\r\n  http.post(`${endpoints.editExpense}?id=${expenseID}`, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n    walletID,\r\n  });\r\n\r\nexport const deleteExpense = (expenseID: number) =>\r\n  http.get(`${endpoints.deleteExpense}?id=${expenseID}`);\r\n","import { http, endpoints } from \"services/http\";\r\n\r\nexport const addIncome = (\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number,\r\n  walletID: string\r\n) =>\r\n  http.post(endpoints.addIncome, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n    walletID,\r\n  });\r\n\r\nexport const editIncome = (\r\n  incomeID: number | string,\r\n  name: string,\r\n  value: number,\r\n  date: string,\r\n  categoryID: number,\r\n  walletID: string\r\n) =>\r\n  http.post(`${endpoints.editIncome}?id=${incomeID}`, {\r\n    name,\r\n    value,\r\n    date,\r\n    categoryID,\r\n    walletID,\r\n  });\r\n\r\nexport const deleteIncome = (incomeID: number | string) =>\r\n  http.get(`${endpoints.deleteIncome}?id=${incomeID}`);\r\n","import { PrivateWallet } from \"interfaces/privateWallet\";\r\nimport { SheredWallet } from \"interfaces/sheredWallet\";\r\nimport { Category } from \"interfaces/category\";\r\nimport { Expense } from \"interfaces/expense\";\r\nimport { Income } from \"interfaces/income\";\r\nimport { findIndex } from \"lodash\";\r\n\r\nconst nullCategory: Category = {\r\n  id: -1,\r\n  name: \"Brak kategorii\",\r\n};\r\n\r\nexport const mapPrivateWallets = (data: any) =>\r\n  data.walletJSONs.map((wallet: any) => ({\r\n    ...wallet,\r\n    isPrivate: true,\r\n    expenses: replaceNullCategories(wallet.expenses),\r\n    incomes: replaceNullCategories(wallet.incomes),\r\n    dateFrom: data.dateFrom,\r\n    dateTo: data.dateTo,\r\n    expensesCategories: data.expensesCategories,\r\n    incomesCategories: data.incomesCategories,\r\n  }));\r\n\r\nexport const mapPrivateWallet = (data: any) => ({\r\n  ...data.wallet,\r\n  isPrivate: true,\r\n  dateFrom: data.dateFrom,\r\n  dateTo: data.dateTo,\r\n  expensesCategories: data.expensesCategories,\r\n  incomesCategories: data.incomesCategories,\r\n});\r\n\r\nexport const mapSheredWallets = (data: any) =>\r\n  data.result.map((wallet: any) => ({\r\n    ...wallet,\r\n    isPrivate: false,\r\n    expenses: replaceNullCategories(wallet.expenses),\r\n    categories: wallet.expencesCategories,\r\n  }));\r\n\r\nexport const mapSheredWallet = (data: any) => ({\r\n  ...data,\r\n  isPrivate: false,\r\n  categories: data.expencesCategories,\r\n});\r\n\r\nconst replaceNullCategories = (array: Array<Expense | Income>) =>\r\n  array.map((item) =>\r\n    item.category ? item : { ...item, category: nullCategory }\r\n  );\r\n\r\nexport const replaceCategoryWithNullCategory = (\r\n  array: Array<Expense | Income>,\r\n  categoryId: number\r\n) =>\r\n  array.map((item) =>\r\n    `${item.category.id}` === `${categoryId}`\r\n      ? { ...item, category: nullCategory }\r\n      : item\r\n  );\r\n\r\nexport const findExpense = (\r\n  wallets: Array<PrivateWallet | SheredWallet>,\r\n  walletId: string,\r\n  expenseId: number | string\r\n) =>\r\n  wallets\r\n    .find((wallet) => `${wallet.id}` === `${walletId}`)\r\n    ?.expenses.find((expense) => `${expense.id}` === `${expenseId}`);\r\n\r\nexport const indexOfSheredWallet = (\r\n  wallets: Array<PrivateWallet | SheredWallet>\r\n) => findIndex(wallets, [\"isPrivate\", false]);\r\n","import React, { createContext, useState, useEffect, useCallback } from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { AppState } from \"interfaces/appState\";\r\nimport { User } from \"interfaces/user\";\r\nimport { Expense } from \"interfaces/expense\";\r\nimport { Income } from \"interfaces/income\";\r\nimport { Category } from \"interfaces/category\";\r\nimport { PrivateWallet } from \"interfaces/privateWallet\";\r\nimport { SheredWallet } from \"interfaces/sheredWallet\";\r\nimport { getToken, setToken, removeToken, DecodedJwt } from \"services/auth\";\r\nimport { services } from \"services\";\r\nimport {\r\n  mapPrivateWallets,\r\n  mapPrivateWallet,\r\n  mapSheredWallets,\r\n  mapSheredWallet,\r\n  findExpense,\r\n  indexOfSheredWallet,\r\n  replaceCategoryWithNullCategory,\r\n} from \"./dataMappers\";\r\nimport { routes } from \"App\";\r\nimport { toast } from \"utils/toast\";\r\nimport { filterById, indexOfById, findById } from \"utils\";\r\n\r\nexport const AppContext = createContext({});\r\nexport interface DataProviderProps extends RouteComponentProps {}\r\n\r\nconst RawDataProvider: React.SFC<DataProviderProps> = ({\r\n  children,\r\n  history,\r\n}) => {\r\n  const [appState, setAppState] = useState<AppState>({\r\n    user: null,\r\n    wallets: [],\r\n  });\r\n  const [loading, setLoading] = useState<Boolean>(false);\r\n\r\n  const setWallets = (wallets: Array<PrivateWallet | SheredWallet>) => {\r\n    setAppState({\r\n      ...appState,\r\n      wallets,\r\n    });\r\n  };\r\n\r\n  const setUsersData = useCallback(async () => {\r\n    const token = getToken();\r\n    if (!appState.user && token) {\r\n      setLoading(true);\r\n      const { username, email, userID }: DecodedJwt = jwt_decode(token);\r\n      const { data: groups } = await services.getGroups(username);\r\n      services\r\n        .getWallets(username)\r\n        .then(({ data }) => {\r\n          setAppState({\r\n            wallets: [...mapPrivateWallets(data), ...mapSheredWallets(groups)],\r\n            user: {\r\n              id: userID,\r\n              username,\r\n              email,\r\n            },\r\n          });\r\n        })\r\n        .finally(() => {\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [appState]);\r\n\r\n  useEffect(() => {\r\n    setUsersData();\r\n  }, [setUsersData]);\r\n\r\n  const doLogIn = (username: string, password: string) =>\r\n    services.login(username, password).then(async ({ data: token }) => {\r\n      await setToken(token);\r\n      await setUsersData();\r\n      if (appState.wallets.length)\r\n        history.push(`${routes.wallet}/${appState.wallets[0].id}`);\r\n      else history.push(routes.newWallet);\r\n    });\r\n\r\n  const doLogOut = () => {\r\n    removeToken();\r\n    setAppState({\r\n      user: null,\r\n      wallets: [],\r\n    });\r\n    history.push(routes.empty);\r\n  };\r\n\r\n  const getWallet = (id: string) =>\r\n    appState.wallets.find((wallet) => `${wallet.id}` === id);\r\n\r\n  const addPrivateWallet = async (name: string) => {\r\n    if (appState.user) {\r\n      const { username } = appState.user;\r\n      return services.addWallet(name, username).then(async ({ data }) => {\r\n        const wallets = [...appState.wallets];\r\n        const wallet = mapPrivateWallet(data);\r\n        const index = indexOfSheredWallet(appState.wallets);\r\n        wallets.splice(index, 0, wallet);\r\n        setWallets(wallets);\r\n        history.push(`${routes.wallet}/${data.w.id}`);\r\n      });\r\n    } else return Promise.reject();\r\n  };\r\n  const addSheredWallet = async (name: string, usersNames: string[]) => {\r\n    if (appState.user) {\r\n      const { username } = appState.user;\r\n      return services\r\n        .addGroup(name, username, usersNames)\r\n        .then(async ({ data }) => {\r\n          const response = await services.getGroups(username, data.id);\r\n          const wallets = [\r\n            ...appState.wallets,\r\n            ...mapSheredWallets(response.data),\r\n          ];\r\n          setWallets(wallets);\r\n          history.push(`${routes.wallet}/${data.id}`);\r\n        });\r\n    } else return Promise.reject();\r\n  };\r\n\r\n  const deleteWallet = async (walletId: string, isPrivate: boolean) => {\r\n    setLoading(true);\r\n    const apiCall = isPrivate ? services.deleteWallet : services.deleteGroup;\r\n    return apiCall(walletId)\r\n      .then(() => {\r\n        const wallets = filterById([...appState.wallets], walletId);\r\n        setWallets(wallets);\r\n        if (wallets.length) history.push(`${routes.wallet}/${wallets[0].id}`);\r\n        else history.push(`${routes.newWallet}`);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  };\r\n  const editWallet = async (\r\n    walletId: string,\r\n    isPrivate: boolean,\r\n    newName: string\r\n  ) => {\r\n    const apiCall = isPrivate ? services.editWallet : services.editGroup;\r\n    return apiCall(walletId, newName).then(({ data }) => {\r\n      const wallets = [...appState.wallets];\r\n      const index = indexOfById(wallets, walletId);\r\n      if (index >= 0) {\r\n        wallets[index] = isPrivate\r\n          ? mapPrivateWallet(data)\r\n          : mapSheredWallet(data);\r\n      }\r\n      setWallets(wallets);\r\n    });\r\n  };\r\n\r\n  const setWalletDataByDate = (walletId: string) => (\r\n    dateFrom: string,\r\n    dateTo: string\r\n  ) => {\r\n    const wallets = [...appState.wallets];\r\n    const index = indexOfById(wallets, walletId);\r\n    if (wallets[index] && appState.user) {\r\n      const getData = wallets[index].isPrivate\r\n        ? services.getWallets\r\n        : services.getGroups;\r\n      return getData(appState.user.username, walletId, dateFrom, dateTo).then(\r\n        ({ data }) => {\r\n          wallets[index] = wallets[index].isPrivate\r\n            ? mapPrivateWallets(data)[0]\r\n            : mapSheredWallets(data)[0];\r\n          setWallets(wallets);\r\n        }\r\n      );\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const addCategory = (walletId: string, isIncome: boolean = false) => (\r\n    category: Category\r\n  ) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (category.name && appState.user && wallet) {\r\n      if (wallet.isPrivate) {\r\n        if (isIncome)\r\n          return services\r\n            .addCategoryOfIncome(category.name, appState.user.username)\r\n            .then(({ data }) => {\r\n              if (\"incomesCategories\" in wallet)\r\n                wallet.incomesCategories.push(data);\r\n              setWallets(wallets);\r\n            });\r\n        return services\r\n          .addCategoryOfExpense(category.name, appState.user.username)\r\n          .then(({ data }) => {\r\n            if (\"expensesCategories\" in wallet)\r\n              wallet.expensesCategories.push(data);\r\n            setWallets(wallets);\r\n          });\r\n      } else if (\"categories\" in wallet)\r\n        return services\r\n          .addCategoryOfExpense(category.name, \"\", walletId)\r\n          .then(({ data }) => {\r\n            wallet.categories.push(data);\r\n            setWallets(wallets);\r\n          });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const editCategory = (walletId: string, isIncome: boolean = false) => (\r\n    category: Category\r\n  ) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (category.name && appState.user && wallet) {\r\n      if (wallet.isPrivate) {\r\n        if (isIncome)\r\n          return services\r\n            .editCategoryOfIncome(\r\n              category.id,\r\n              category.name,\r\n              appState.user.username\r\n            )\r\n            .then(({ data: { categoryOfIncomes: data } }) => {\r\n              if (\"incomesCategories\" in wallet) {\r\n                const cat = findById(wallet.incomesCategories, data.id);\r\n                if (cat) {\r\n                  cat.name = data.name;\r\n                  wallet.incomes.forEach((income: Income) => {\r\n                    if (`${income.category.id}` === `${data.id}`)\r\n                      income.category.name = data.name;\r\n                  });\r\n                  setWallets(wallets);\r\n                }\r\n              }\r\n            });\r\n        return services\r\n          .editCategoryOfExpense(\r\n            category.id,\r\n            category.name,\r\n            appState.user.username\r\n          )\r\n          .then(({ data: { categoryOfExpenses: data } }) => {\r\n            if (\"expensesCategories\" in wallet) {\r\n              const cat = findById(wallet.expensesCategories, data.id);\r\n              if (cat) {\r\n                cat.name = data.name;\r\n                wallet.expenses.forEach((expense: Income) => {\r\n                  if (`${expense.category.id}` === `${data.id}`)\r\n                    expense.category.name = data.name;\r\n                });\r\n                setWallets(wallets);\r\n              }\r\n            }\r\n          });\r\n      } else if (\"categories\" in wallet)\r\n        return services\r\n          .editCategoryOfExpense(category.id, category.name, \"\", walletId)\r\n          .then(({ data: { categoryOfExpenses: data } }) => {\r\n            const cat = findById(wallet.categories, data.id);\r\n            if (cat) {\r\n              cat.name = data.name;\r\n              wallet.expenses.forEach((expense: Income) => {\r\n                if (`${expense.category.id}` === `${data.id}`)\r\n                  expense.category.name = data.name;\r\n              });\r\n              setWallets(wallets);\r\n            }\r\n          });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const deleteCategory = (walletId: string, isIncome: boolean = false) => (\r\n    category: Category\r\n  ) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet) {\r\n      if (wallet.isPrivate) {\r\n        if (isIncome)\r\n          return services.deleteCategoryOfIncome(category.id).then(() => {\r\n            if (\"incomesCategories\" in wallet) {\r\n              wallet.incomesCategories = filterById(\r\n                wallet.incomesCategories,\r\n                category.id\r\n              );\r\n              wallet.incomes = replaceCategoryWithNullCategory(\r\n                wallet.incomes,\r\n                category.id\r\n              );\r\n              setWallets(wallets);\r\n            }\r\n          });\r\n        return services.deleteCategoryOfExpense(category.id).then(() => {\r\n          if (\"expensesCategories\" in wallet) {\r\n            wallet.expensesCategories = filterById(\r\n              wallet.expensesCategories,\r\n              category.id\r\n            );\r\n            wallet.expenses = replaceCategoryWithNullCategory(\r\n              wallet.expenses,\r\n              category.id\r\n            );\r\n            setWallets(wallets);\r\n          }\r\n        });\r\n      } else\r\n        return services.deleteCategoryOfExpense(category.id).then(() => {\r\n          if (\"categories\" in wallet) {\r\n            wallet.categories = filterById(wallet.categories, category.id);\r\n            wallet.expenses = replaceCategoryWithNullCategory(\r\n              wallet.expenses,\r\n              category.id\r\n            );\r\n            setWallets(wallets);\r\n          }\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const addExpense = (walletId: string) => (expenseData: Expense) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet && appState.user) {\r\n      const { name, value, date, category } = expenseData;\r\n      if (wallet.isPrivate)\r\n        return services\r\n          .addExpense(name, value, date, category.id, walletId)\r\n          .then(({ data }) => {\r\n            wallet.expenses.push(data);\r\n            wallet.sumExpenses += data.value;\r\n            setWallets(wallets);\r\n          });\r\n\r\n      return services\r\n        .addGroupExpense(\r\n          name,\r\n          value,\r\n          date,\r\n          category.id,\r\n          appState.user.username,\r\n          walletId\r\n        )\r\n        .then(({ data }) => {\r\n          wallet.expenses.push(data);\r\n          wallet.sumExpenses += data.value;\r\n          setWallets(wallets);\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const editExpense = (walletId: string) => (expenseData: Expense) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet) {\r\n      const { id, name, value, date, category } = expenseData;\r\n      if (wallet.isPrivate)\r\n        return services\r\n          .editExpense(id, name, value, date, category.id, walletId)\r\n          .then(({ data: { expense: data } }) => {\r\n            const index = indexOfById(wallet.expenses, data.id);\r\n            wallet.expenses[index] = data;\r\n            setWallets(wallets);\r\n          });\r\n\r\n      return services\r\n        .editGroupExpense(id, name, value, date, category.id)\r\n        .then(({ data }) => {\r\n          const index = indexOfById(wallet.expenses, data.id);\r\n          wallet.expenses[index] = data;\r\n          setWallets(wallets);\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const deleteExpense = (walletId: string) => (expenseData: Expense) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet) {\r\n      const apiCall = wallet.isPrivate\r\n        ? services.deleteExpense\r\n        : services.deleteGroupExpense;\r\n      return apiCall(expenseData.id).then(() => {\r\n        wallet.expenses = filterById(wallet.expenses, expenseData.id);\r\n        setWallets(wallets);\r\n      });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const addIncome = (walletId: string) => (incomeData: Income) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet && \"incomes\" in wallet) {\r\n      const { name, value, date, category } = incomeData;\r\n      return services\r\n        .addIncome(name, value, date, category.id, walletId)\r\n        .then(({ data }) => {\r\n          wallet.incomes.push(data);\r\n          wallet.sumIncomes += data.value;\r\n          setWallets(wallets);\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const editIncome = (walletId: string) => (incomeData: Income) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet && \"incomes\" in wallet) {\r\n      const { id, name, value, date, category } = incomeData;\r\n      return services\r\n        .editIncome(id, name, value, date, category.id, walletId)\r\n        .then(({ data: { income: data } }) => {\r\n          const index = indexOfById(wallet.incomes, data.id);\r\n          wallet.incomes[index] = data;\r\n          setWallets(wallets);\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  const deleteIncome = (walletId: string) => (incomeData: Income) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    return services.deleteIncome(incomeData.id).then(() => {\r\n      if (wallet && \"incomes\" in wallet) {\r\n        wallet.incomes = filterById(wallet.incomes, incomeData.id);\r\n        setWallets(wallets);\r\n      }\r\n    });\r\n  };\r\n\r\n  const addUser = (walletId: string) => (userData: User) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet && \"users\" in wallet) {\r\n      return services\r\n        .addUsersToGroup(walletId, [userData.username])\r\n        .then(() => {\r\n          wallet.users.push(userData);\r\n          setWallets(wallets);\r\n        });\r\n    } else return Promise.reject();\r\n  };\r\n\r\n  const deleteUser = (walletId: string) => (userData: User) => {\r\n    const wallets = [...appState.wallets];\r\n    const wallet = findById(wallets, walletId);\r\n    if (wallet && \"users\" in wallet) {\r\n      return services\r\n        .deleteUsersFromGroup(walletId, [userData.username])\r\n        .then(() => {\r\n          wallet.users = filterById(wallet.users, userData.id);\r\n          setWallets(wallets);\r\n        });\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const checkUserInGroupExpense = (walletId: string) => (\r\n    expenseId: number,\r\n    username: string\r\n  ) => {\r\n    const wallets = [...appState.wallets];\r\n    const expense = findExpense(wallets, walletId, expenseId);\r\n    if (\r\n      expense &&\r\n      expense.users &&\r\n      (expense.owner?.username === appState.user?.username ||\r\n        username === appState.user?.username)\r\n    ) {\r\n      expense.users[username] = !expense.users[username];\r\n      return services.checkUserInGroupExpense(expenseId, username).then(() => {\r\n        setWallets(wallets);\r\n      });\r\n    } else {\r\n      toast.error(\"Nie masz uprawnień do zmiany tego pola.\");\r\n      return Promise.reject();\r\n    }\r\n  };\r\n\r\n  const context = {\r\n    ...appState,\r\n    loading,\r\n    doLogIn,\r\n    doLogOut,\r\n    setUsersData,\r\n    getWallet,\r\n    addPrivateWallet,\r\n    addSheredWallet,\r\n    deleteWallet,\r\n    editWallet,\r\n    setWalletDataByDate,\r\n    addCategory,\r\n    editCategory,\r\n    deleteCategory,\r\n    addExpense,\r\n    editExpense,\r\n    deleteExpense,\r\n    addIncome,\r\n    editIncome,\r\n    deleteIncome,\r\n    addUser,\r\n    deleteUser,\r\n    checkUserInGroupExpense,\r\n  };\r\n\r\n  return <AppContext.Provider value={context}>{children}</AppContext.Provider>;\r\n};\r\n\r\nexport const DataProvider = withRouter(RawDataProvider);\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { AppBar, Typography, Button } from \"@material-ui/core\";\r\nimport { routes } from \"App\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    appBar: {\r\n      padding: \"2rem 2rem 1.5rem 3rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"flex-start\",\r\n      flexWrap: \"wrap\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: \"1rem 1rem 1.5rem 2rem\",\r\n      },\r\n    },\r\n    logo: {\r\n      fontFamily: \"Lobster, cursive\",\r\n      color: `${theme.palette.primary.main}`,\r\n      letterSpacing: \"2px\",\r\n    },\r\n    usernameContainer: {\r\n      textAlign: \"center\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        marginTop: \"0.5rem\",\r\n      },\r\n    },\r\n    logoutButton: {\r\n      marginTop: \"0.5rem\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        marginTop: 0,\r\n        marginLeft: \"0.5rem\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport const Header = () => {\r\n  const { user, doLogOut } = React.useContext<any>(AppContext);\r\n  const classes = useStyles();\r\n  return (\r\n    <AppBar position=\"static\" color=\"secondary\">\r\n      <div className={classes.appBar}>\r\n        <Typography variant=\"h2\" className={classes.logo}>\r\n          i kwita.\r\n        </Typography>\r\n        {user && (\r\n          <div className={classes.usernameContainer}>\r\n            <Typography>{user.username}</Typography>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={doLogOut}\r\n              component={Link}\r\n              to={routes.empty}\r\n              className={classes.logoutButton}\r\n            >\r\n              Wyloguj\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </AppBar>\r\n  );\r\n};\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { AppBar, Tabs, Tab } from \"@material-ui/core\";\r\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { routes } from \"../../App\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { Wallet } from \"interfaces/wallet\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    newWallet: {\r\n      display: \"flex\",\r\n    },\r\n    icon: {\r\n      marginRight: \"0.5rem\",\r\n    },\r\n  })\r\n);\r\n\r\nexport interface MenuProps {\r\n  match: {\r\n    params: { id: string };\r\n    path: string;\r\n  };\r\n}\r\n\r\nexport const Menu: React.SFC<MenuProps> = ({ match: { params, path } }) => {\r\n  const classes = useStyles();\r\n  const { user, wallets } = useContext<any>(AppContext);\r\n  const [tabIndex, setTabIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (params.hasOwnProperty(\"id\")) {\r\n      const index = wallets.findIndex(\r\n        (wallet: Wallet) => `${wallet.id}` === params.id\r\n      );\r\n      if (index > -1) setTabIndex(index);\r\n    } else if (path === routes.newWallet) setTabIndex(wallets.length);\r\n  }, [params, wallets, path]);\r\n\r\n  const handleChange = (event: React.ChangeEvent<{}>, newTabIndex: number) => {\r\n    setTabIndex(newTabIndex);\r\n  };\r\n  return user ? (\r\n    <AppBar position=\"static\" color=\"secondary\">\r\n      <Tabs\r\n        value={tabIndex}\r\n        indicatorColor=\"primary\"\r\n        onChange={handleChange}\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"auto\"\r\n      >\r\n        {wallets.map((wallet: Wallet) => (\r\n          <Tab\r\n            component={Link}\r\n            to={`${routes.wallet}/${wallet.id}`}\r\n            label={wallet.name}\r\n            key={`${wallet.name}-${wallet.id}`}\r\n          />\r\n        ))}\r\n        <Tab\r\n          component={Link}\r\n          to={routes.newWallet}\r\n          label={\r\n            <div className={classes.newWallet}>\r\n              <AddCircleIcon className={classes.icon} />\r\n              Dodaj nowy portfel\r\n            </div>\r\n          }\r\n        />\r\n      </Tabs>\r\n    </AppBar>\r\n  ) : null;\r\n};\r\n","export const tableLocalization = {\r\n  body: {\r\n    emptyDataSourceMessage: \"Brak danych do wyświetlenia\",\r\n    addTooltip: \"Dodaj\",\r\n    deleteTooltip: \"Usuń\",\r\n    editTooltip: \"Edytuj\",\r\n    filterRow: {\r\n      filterTooltip: \"Filtruj\"\r\n    },\r\n    editRow: {\r\n      deleteText: \"Czy na pewno chcesz usunąć ten wiersz?\",\r\n      cancelTooltip: \"Anuluj\",\r\n      saveTooltip: \"Zapisz\"\r\n    }\r\n  },\r\n  grouping: {\r\n    placeholder: \"Drag headers ...\",\r\n    groupedBy: \"Grouped By:\"\r\n  },\r\n  header: {\r\n    actions: \"Akcje\"\r\n  },\r\n  pagination: {\r\n    labelDisplayedRows: \"{from}-{to} z {count}\",\r\n    labelRowsSelect: \"wierszy\",\r\n    labelRowsPerPage: \"Wierszy na stronie:\",\r\n    firstAriaLabel: \"Pierwsza strona\",\r\n    firstTooltip: \"Pierwsza strona\t\",\r\n    previousAriaLabel: \"Poprzednia strona\",\r\n    previousTooltip: \"Poprzednia strona\",\r\n    nextAriaLabel: \"Następnia strona\",\r\n    nextTooltip: \"Następnia strona\",\r\n    lastAriaLabel: \"Ostatnia strona\",\r\n    lastTooltip: \"Ostatnia strona\"\r\n  },\r\n  toolbar: {\r\n    addRemoveColumns: \"Dodaj lub usuń kolumny\",\r\n    nRowsSelected: \"{0} wybranych wierszy\",\r\n    showColumnsTitle: \"Pokaż kolumny\",\r\n    showColumnsAriaLabel: \"Pokaż kolumny\",\r\n    exportTitle: \"Eksportuj\",\r\n    exportAriaLabel: \"Eksportuj\",\r\n    exportName: \"Eksportuj jako CSV\",\r\n    searchTooltip: \"Szukaj\",\r\n    searchPlaceholder: \"Szukaj\"\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { DatePicker as MuiDatePicker } from \"@material-ui/pickers\";\r\nimport MaterialTable, { Column } from \"material-table\";\r\nimport { Expense } from \"interfaces/expense\";\r\nimport { Income } from \"interfaces/income\";\r\nimport { Category } from \"interfaces/category\";\r\nimport { tableLocalization } from \"settings/tableLocalization\";\r\nimport { toast } from \"utils/toast\";\r\nimport { dateToYYYYMMDD } from \"utils\";\r\n\r\nexport interface TableProps {\r\n  data: Array<Expense> | Array<Income>;\r\n  onAdd: (arg: Expense | Income) => Promise<any>;\r\n  onEdit: (arg: Expense | Income) => Promise<any>;\r\n  onDelete: (arg: Expense | Income) => Promise<any>;\r\n  categories: Array<Category>;\r\n  currency: string;\r\n  title?: string;\r\n}\r\n\r\nexport const Table: React.SFC<TableProps> = ({\r\n  data,\r\n  onAdd,\r\n  onEdit,\r\n  onDelete,\r\n  categories,\r\n  currency,\r\n  title,\r\n}) => {\r\n  const getCategoriesLookup = () => {\r\n    const lookup: any = {};\r\n    categories.forEach((category) => {\r\n      lookup[category.id] = category.name;\r\n    });\r\n    return lookup;\r\n  };\r\n  const columns: Array<Column<Expense | Income>> = [\r\n    {\r\n      title: \"Data\",\r\n      field: \"date\",\r\n      editComponent: (props) => (\r\n        <MuiDatePicker\r\n          variant=\"inline\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={props.value}\r\n          onChange={props.onChange}\r\n        />\r\n      ),\r\n      defaultSort: \"desc\",\r\n    },\r\n    { title: \"Nazwa\", field: \"name\" },\r\n    { title: `Wartość (${currency})`, field: \"value\" },\r\n    {\r\n      title: \"Kategoria\",\r\n      field: \"category.id\",\r\n      lookup: getCategoriesLookup(),\r\n    },\r\n  ];\r\n\r\n  const validate = (data: Expense | Income) => {\r\n    const { name, value, category } = data;\r\n    if (name && value && category) return true;\r\n    toast.error(\"Nazwa, wartość i kategoria są wymagane.\");\r\n    return false;\r\n  };\r\n\r\n  const handleAdd = (newData: Expense | Income) => {\r\n    if (validate(newData)) {\r\n      if (!newData.date) newData.date = dateToYYYYMMDD(new Date());\r\n      return onAdd(newData);\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleEdit = (newData: Expense | Income) => {\r\n    if (validate(newData)) return onEdit(newData);\r\n    return Promise.reject();\r\n  };\r\n\r\n  return (\r\n    <MaterialTable\r\n      title={title}\r\n      columns={columns}\r\n      data={data}\r\n      localization={tableLocalization}\r\n      options={{\r\n        actionsColumnIndex: -1,\r\n      }}\r\n      editable={{\r\n        onRowAdd: (newData) => handleAdd(newData),\r\n        onRowUpdate: (newData, oldData) => handleEdit(newData),\r\n        onRowDelete: (oldData) => onDelete(oldData),\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button, CircularProgress, ButtonProps } from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    loader: {\r\n      marginLeft: \"6px\",\r\n    },\r\n  })\r\n);\r\n\r\nexport interface LoadingButtonProps extends ButtonProps {\r\n  loading: boolean;\r\n  text: string;\r\n}\r\n\r\nexport const LoadingButton: React.SFC<LoadingButtonProps> = ({\r\n  loading,\r\n  text,\r\n  ...rest\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Button variant=\"contained\" color=\"primary\" disabled={loading} {...rest}>\r\n      {text}\r\n      {loading && <CircularProgress className={classes.loader} size={16} />}\r\n    </Button>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { DatePicker as MuiDatePicker } from \"@material-ui/pickers\";\r\nimport { LoadingButton } from \"components/shered/LoadingButton\";\r\nimport { dateToYYYYMMDD } from \"utils\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      flexWrap: \"wrap\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        flexDirection: \"column\",\r\n        marginBottom: \"6px\",\r\n      },\r\n    },\r\n    formField: {\r\n      margin: \"0 1rem 1rem 0\",\r\n    },\r\n  })\r\n);\r\n\r\nexport interface DatePickerProps {\r\n  dateFrom: Date;\r\n  dateTo: Date;\r\n  onDatesSubmit: (dateFrom: string, dateTo: string) => Promise<any>;\r\n}\r\n\r\nexport const DatePicker: React.SFC<DatePickerProps> = ({\r\n  dateFrom,\r\n  dateTo,\r\n  onDatesSubmit,\r\n}) => {\r\n  const [startDate, setStartDate] = useState<any>(dateFrom);\r\n  const [endDate, setEndDate] = useState<any>(dateTo);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClick = () => {\r\n    setLoading(true);\r\n    const start =\r\n      startDate instanceof Date ? dateToYYYYMMDD(startDate) : startDate;\r\n    const end = endDate instanceof Date ? dateToYYYYMMDD(endDate) : endDate;\r\n    onDatesSubmit(start, end).finally(() => {\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <MuiDatePicker\r\n        variant=\"inline\"\r\n        label=\"Od\"\r\n        format=\"dd/MM/yyyy\"\r\n        value={startDate}\r\n        maxDate={new Date(endDate)}\r\n        onChange={setStartDate}\r\n        className={classes.formField}\r\n      />\r\n      <MuiDatePicker\r\n        variant=\"inline\"\r\n        label=\"Do\"\r\n        format=\"dd/MM/yyyy\"\r\n        value={endDate}\r\n        onChange={setEndDate}\r\n        minDate={new Date(startDate)}\r\n        className={classes.formField}\r\n      />\r\n      <LoadingButton onClick={handleClick} text=\"Odśwież\" loading={loading} />\r\n    </div>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { ResponsivePie } from \"@nivo/pie\";\r\nimport { Expense } from \"interfaces/expense\";\r\nimport { Income } from \"interfaces/income\";\r\nimport { groupBy } from \"lodash\";\r\n\r\nexport interface PieChartProps {\r\n  data: Array<Expense> | Array<Income>;\r\n  isPerUser?: boolean;\r\n}\r\n\r\nconst mapDataForPieChart = (data: Array<Expense> | Array<Income>) => {\r\n  const grouped = groupBy(data, \"category.name\");\r\n  return Object.keys(grouped).map((category: string) => {\r\n    const value =\r\n      grouped[category].length === 1\r\n        ? grouped[category][0].value\r\n        : grouped[category]\r\n            .map((item: Expense | Income) => item.value)\r\n            .reduce((prev: number, current: number) => prev + current);\r\n    return { id: category, label: category, value };\r\n  });\r\n};\r\n\r\nconst mapDataForPieChartPerUser = (data: Array<Expense>) => {\r\n  const grouped = groupBy(data, \"category.name\");\r\n  return Object.keys(grouped).map((category: string) => {\r\n    const value =\r\n      grouped[category].length === 1\r\n        ? grouped[category][0].valuePerUser\r\n        : grouped[category]\r\n            .map((item: Expense) => item.valuePerUser)\r\n            .reduce((prev: number, current: number) => prev + current);\r\n    return { id: category, label: category, value };\r\n  });\r\n};\r\n\r\nexport const PieChart: React.SFC<PieChartProps> = ({\r\n  data,\r\n  isPerUser = false,\r\n}) => {\r\n  return (\r\n    <ResponsivePie\r\n      data={\r\n        isPerUser\r\n          ? mapDataForPieChartPerUser(data as Array<Expense>)\r\n          : mapDataForPieChart(data)\r\n      }\r\n      margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\r\n      innerRadius={0.5}\r\n      padAngle={0.7}\r\n      cornerRadius={3}\r\n      colors={{ scheme: \"yellow_green_blue\" }}\r\n      borderWidth={1}\r\n      borderColor={{ from: \"color\", modifiers: [[\"darker\", 0.2]] }}\r\n      radialLabelsSkipAngle={10}\r\n      radialLabelsTextXOffset={6}\r\n      radialLabelsTextColor=\"333333\"\r\n      radialLabelsLinkOffset={0}\r\n      radialLabelsLinkDiagonalLength={16}\r\n      radialLabelsLinkHorizontalLength={24}\r\n      radialLabelsLinkStrokeWidth={1}\r\n      radialLabelsLinkColor={{ from: \"color\" }}\r\n      slicesLabelsSkipAngle={10}\r\n      slicesLabelsTextColor=\"#333\"\r\n      animate={true}\r\n      motionStiffness={90}\r\n      motionDamping={15}\r\n      legends={[\r\n        {\r\n          anchor: \"bottom\",\r\n          direction: \"row\",\r\n          translateY: 56,\r\n          itemWidth: 100,\r\n          itemHeight: 18,\r\n          itemTextColor: \"#333\",\r\n          symbolSize: 18,\r\n          symbolShape: \"circle\",\r\n          effects: [\r\n            {\r\n              on: \"hover\",\r\n              style: {\r\n                itemTextColor: \"#000\",\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { Button, Dialog } from \"@material-ui/core\";\r\nimport MaterialTable, { Column } from \"material-table\";\r\nimport { tableLocalization } from \"settings/tableLocalization\";\r\nimport { Category } from \"interfaces/category\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    table: {\r\n      minWidth: \"530px\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minWidth: \"95%\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport interface CategoriesProps {\r\n  categories: Array<Category>;\r\n  addCategory: (category: Category) => Promise<any>;\r\n  editCategory: (category: Category, oldData: any) => Promise<any>;\r\n  deleteCategory: (category: Category) => Promise<any>;\r\n}\r\n\r\nexport const Categories: React.SFC<CategoriesProps> = ({\r\n  categories,\r\n  addCategory,\r\n  editCategory,\r\n  deleteCategory,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [openCategories, setOpenCategories] = useState(false);\r\n  const columns: Array<Column<Category>> = [{ title: \"Nazwa\", field: \"name\" }];\r\n\r\n  const toggleCategories = () => {\r\n    setOpenCategories(!openCategories);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button variant=\"outlined\" color=\"secondary\" onClick={toggleCategories}>\r\n        Kategorie\r\n      </Button>\r\n      <Dialog onClose={toggleCategories} open={openCategories}>\r\n        <div className={classes.table}>\r\n          <MaterialTable\r\n            title=\"Kategorie\"\r\n            columns={columns}\r\n            data={categories}\r\n            localization={tableLocalization}\r\n            options={{\r\n              actionsColumnIndex: -1,\r\n            }}\r\n            editable={{\r\n              onRowAdd: (newData) => addCategory(newData),\r\n              onRowUpdate: (newData, oldData) => editCategory(newData, oldData),\r\n              onRowDelete: (oldData) => deleteCategory(oldData),\r\n            }}\r\n          />\r\n        </div>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\n\r\nexport interface DeleteWalletButtonProps {\r\n  walletId: string;\r\n  walletName: string;\r\n  isPrivate: boolean;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    button: {\r\n      color: theme.palette.error.main,\r\n    },\r\n  })\r\n);\r\n\r\nexport const DeleteWalletButton: React.SFC<DeleteWalletButtonProps> = ({\r\n  walletId,\r\n  walletName,\r\n  isPrivate,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { deleteWallet } = React.useContext<any>(AppContext);\r\n\r\n  const openDialog = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const closeDialog = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    closeDialog();\r\n    deleteWallet(walletId, isPrivate);\r\n  };\r\n  return (\r\n    <>\r\n      <Button className={classes.button} onClick={openDialog}>\r\n        Usuń portfel\r\n      </Button>\r\n      <Dialog open={open} onClose={closeDialog}>\r\n        <DialogTitle>{`Usunięcie portfela jest akcją nieodwracalną.`}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Jesteś pewien, że chcesz usunąć portfel: {walletName}?\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeDialog} color=\"secondary\" autoFocus>\r\n            Anuluj\r\n          </Button>\r\n          <Button onClick={handleConfirm} className={classes.button}>\r\n            Usuń portfel\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\n\r\nexport interface ChangeNameButtonProps {\r\n  walletId: string;\r\n  walletName: string;\r\n  isPrivate: boolean;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    loader: {\r\n      marginLeft: \"8px\",\r\n      width: \"64px\",\r\n      textAlign: \"center\",\r\n    },\r\n  })\r\n);\r\n\r\nexport const ChangeNameButton: React.SFC<ChangeNameButtonProps> = ({\r\n  walletId,\r\n  walletName,\r\n  isPrivate,\r\n}) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [name, setName] = React.useState(walletName);\r\n  const { editWallet } = React.useContext<any>(AppContext);\r\n  const classes = useStyles();\r\n\r\n  const handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setName(event.target.value);\r\n  };\r\n  const openDialog = () => {\r\n    setOpen(true);\r\n  };\r\n  const closeDialog = () => {\r\n    setOpen(false);\r\n    setName(walletName);\r\n  };\r\n  const handleConfirm = () => {\r\n    setLoading(true);\r\n    editWallet(walletId, isPrivate, name).finally(() => {\r\n      closeDialog();\r\n      setLoading(false);\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <Button color=\"secondary\" onClick={openDialog}>\r\n        Zmień nazwę\r\n      </Button>\r\n      <Dialog open={open} onClose={closeDialog}>\r\n        <DialogTitle>{`Wpisz nową nazwę portfela:`}</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            fullWidth\r\n            autoFocus\r\n            label=\"Nazwa\"\r\n            value={name}\r\n            onChange={handleNameChange}\r\n          ></TextField>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeDialog} color=\"secondary\">\r\n            Anuluj\r\n          </Button>\r\n          {loading ? (\r\n            <div className={classes.loader}>\r\n              <CircularProgress size={16} />\r\n            </div>\r\n          ) : (\r\n            <Button onClick={handleConfirm} color=\"primary\" autoFocus>\r\n              Zapisz\r\n            </Button>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { DeleteWalletButton } from \"./DeleteWalletButton\";\r\nimport { ChangeNameButton } from \"./ChangeNameButton\";\r\n\r\nexport interface FooterProps {\r\n  walletId: string;\r\n  walletName: string;\r\n  isPrivate: boolean;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    footer: {\r\n      width: \"90%\",\r\n      textAlign: \"center\",\r\n      marginTop: \"1rem\",\r\n      borderTop: \"1px #ccc solid\",\r\n      padding: \"0.5rem\",\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  })\r\n);\r\n\r\nexport const Footer: React.SFC<FooterProps> = ({\r\n  walletId,\r\n  walletName,\r\n  isPrivate,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.footer}>\r\n      <ChangeNameButton\r\n        walletId={walletId}\r\n        walletName={walletName}\r\n        isPrivate={isPrivate}\r\n      />\r\n      <DeleteWalletButton\r\n        walletId={walletId}\r\n        walletName={walletName}\r\n        isPrivate={isPrivate}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { Table, TableProps } from \"./Table\";\r\nimport { DatePicker, DatePickerProps } from \"components/shered/DatePicker\";\r\nimport { PieChart } from \"components/shered/PieChart\";\r\nimport { Categories, CategoriesProps } from \"components/shered/Categories\";\r\nimport { Footer, FooterProps } from \"components/shered/Footer/\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      padding: \"2rem\",\r\n      textAlign: \"center\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: \"1rem 0.5rem\",\r\n      },\r\n    },\r\n    sum: {\r\n      margin: \"1rem 0\",\r\n    },\r\n    pieChartContainer: {\r\n      height: \"400px\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"90vw\",\r\n      },\r\n    },\r\n    flex: {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      flexWrap: \"wrap\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        flexDirection: \"column\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport interface PrivateWalletDumbProps\r\n  extends TableProps,\r\n    DatePickerProps,\r\n    CategoriesProps,\r\n    FooterProps {\r\n  sum: number;\r\n  isExpenses: boolean;\r\n}\r\n\r\nexport const PrivateWalletDumb: React.SFC<PrivateWalletDumbProps> = ({\r\n  data = [],\r\n  onAdd,\r\n  onEdit,\r\n  onDelete,\r\n  categories = [],\r\n  sum,\r\n  currency,\r\n  isExpenses,\r\n  dateFrom,\r\n  dateTo,\r\n  addCategory,\r\n  editCategory,\r\n  deleteCategory,\r\n  onDatesSubmit,\r\n  walletId,\r\n  walletName,\r\n  isPrivate,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.flex}>\r\n        <DatePicker\r\n          dateFrom={dateFrom}\r\n          dateTo={dateTo}\r\n          onDatesSubmit={onDatesSubmit}\r\n        />\r\n        <Categories\r\n          categories={categories}\r\n          addCategory={addCategory}\r\n          editCategory={editCategory}\r\n          deleteCategory={deleteCategory}\r\n        ></Categories>\r\n      </div>\r\n      <Typography variant=\"h5\" className={classes.sum}>\r\n        Suma: {sum} {currency}\r\n      </Typography>\r\n      {data && !!data.length && (\r\n        <div className={classes.pieChartContainer}>\r\n          <PieChart data={data} />\r\n        </div>\r\n      )}\r\n      <Table\r\n        data={data}\r\n        onAdd={onAdd}\r\n        onEdit={onEdit}\r\n        onDelete={onDelete}\r\n        categories={categories}\r\n        currency={currency}\r\n        title={isExpenses ? \"Historia wydatków\" : \"Historia przychodów\"}\r\n      />\r\n      <Footer\r\n        walletId={walletId}\r\n        walletName={walletName}\r\n        isPrivate={isPrivate}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { AppBar, Tabs, Tab } from \"@material-ui/core\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { PrivateWallet as PrivateWalletInterface } from \"interfaces/privateWallet\";\r\nimport { PrivateWalletDumb } from \"./PrivateWalletDumb\";\r\n\r\nexport interface PrivateWalletProps {\r\n  wallet: PrivateWalletInterface;\r\n}\r\n\r\nexport const PrivateWallet: React.SFC<PrivateWalletProps> = ({ wallet }) => {\r\n  const {\r\n    addCategory,\r\n    editCategory,\r\n    deleteCategory,\r\n    addExpense,\r\n    editExpense,\r\n    deleteExpense,\r\n    addIncome,\r\n    editIncome,\r\n    deleteIncome,\r\n    setWalletDataByDate,\r\n  } = useContext<any>(AppContext);\r\n  const [tabIndex, setTabIndex] = React.useState(0);\r\n  const handleTabChange = (\r\n    event: React.ChangeEvent<{}>,\r\n    newTabIndex: number\r\n  ) => {\r\n    setTabIndex(newTabIndex);\r\n  };\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\" color=\"secondary\">\r\n        <Tabs\r\n          value={tabIndex}\r\n          indicatorColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n          onChange={handleTabChange}\r\n        >\r\n          <Tab label=\"Wydatki\" />\r\n          <Tab label=\"Przychody\" />\r\n        </Tabs>\r\n      </AppBar>\r\n      {tabIndex === 0 && (\r\n        <PrivateWalletDumb\r\n          data={wallet.expenses}\r\n          onAdd={addExpense(wallet.id)}\r\n          onEdit={editExpense(wallet.id)}\r\n          onDelete={deleteExpense(wallet.id)}\r\n          categories={wallet.expensesCategories}\r\n          addCategory={addCategory(wallet.id)}\r\n          editCategory={editCategory(wallet.id)}\r\n          deleteCategory={deleteCategory(wallet.id)}\r\n          sum={wallet.sumExpenses}\r\n          currency={wallet.currency}\r\n          isExpenses={true}\r\n          dateFrom={wallet.dateFrom}\r\n          dateTo={wallet.dateTo}\r\n          onDatesSubmit={setWalletDataByDate(wallet.id)}\r\n          walletId={wallet.id}\r\n          walletName={wallet.name}\r\n          isPrivate={wallet.isPrivate}\r\n        />\r\n      )}\r\n      {tabIndex === 1 && (\r\n        <PrivateWalletDumb\r\n          data={wallet.incomes}\r\n          onAdd={addIncome(wallet.id)}\r\n          onEdit={editIncome(wallet.id)}\r\n          onDelete={deleteIncome(wallet.id)}\r\n          categories={wallet.incomesCategories}\r\n          addCategory={addCategory(wallet.id, true)}\r\n          editCategory={editCategory(wallet.id, true)}\r\n          deleteCategory={deleteCategory(wallet.id, true)}\r\n          sum={wallet.sumIncomes}\r\n          currency={wallet.currency}\r\n          isExpenses={false}\r\n          dateFrom={wallet.dateFrom}\r\n          dateTo={wallet.dateTo}\r\n          onDatesSubmit={setWalletDataByDate(wallet.id)}\r\n          walletId={wallet.id}\r\n          walletName={wallet.name}\r\n          isPrivate={wallet.isPrivate}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { User } from \"interfaces/user\";\r\n\r\nexport interface UsersCheckboxProps {\r\n  checkMap: any;\r\n  owner: User | undefined;\r\n  expenseId: number;\r\n  checkUserInGroupExpense: (\r\n    expenseId: number,\r\n    username: string\r\n  ) => Promise<any>;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    flex: {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n    },\r\n  })\r\n);\r\n\r\nexport const UsersCheckbox: React.SFC<UsersCheckboxProps> = ({\r\n  checkMap,\r\n  owner,\r\n  expenseId,\r\n  checkUserInGroupExpense,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [loadingMap, setLoadingMap] = React.useState<any>({});\r\n\r\n  const setLoading = (username: string, loading: boolean) => {\r\n    const loadingMapCopy = { ...loadingMap };\r\n    loadingMapCopy[username] = loading;\r\n    setLoadingMap(loadingMapCopy);\r\n  };\r\n\r\n  const handleChagne = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const username = event.target.name;\r\n    setLoading(username, true);\r\n    checkUserInGroupExpense(expenseId, username).finally(() => {\r\n      setLoading(username, false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <FormGroup>\r\n      {Object.keys(checkMap).map((username) => {\r\n        const isOwner = owner && owner.username === username;\r\n        const checked = checkMap[username];\r\n        return (\r\n          <div key={`${expenseId}${username}`} className={classes.flex}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={checked}\r\n                  onChange={handleChagne}\r\n                  name={username}\r\n                  disabled={loadingMap[username]}\r\n                />\r\n              }\r\n              label={isOwner ? `${username} (zgłaszający)` : username}\r\n            />\r\n            {loadingMap[username] && <CircularProgress size={15} />}\r\n          </div>\r\n        );\r\n      })}\r\n    </FormGroup>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport MaterialTable, { Column } from \"material-table\";\r\nimport { DatePicker as MuiDatePicker } from \"@material-ui/pickers\";\r\n\r\nimport { tableLocalization } from \"settings/tableLocalization\";\r\nimport { Expense } from \"interfaces/expense\";\r\nimport { Category } from \"interfaces/category\";\r\nimport { User } from \"interfaces/user\";\r\nimport { UsersCheckbox } from \"./UsersCheckbox\";\r\nimport { toast } from \"utils/toast\";\r\nimport { dateToYYYYMMDD } from \"utils\";\r\nimport { round } from \"lodash\";\r\n\r\nexport interface TableProps {\r\n  data: Array<Expense>;\r\n  addExpense: (arg: Expense) => Promise<any>;\r\n  editExpense: (arg: Expense) => Promise<any>;\r\n  deleteExpense: (arg: Expense) => Promise<any>;\r\n  checkUserInGroupExpense: (\r\n    expenseId: number,\r\n    username: string\r\n  ) => Promise<any>;\r\n  categories: Array<Category>;\r\n  currency: string;\r\n  title?: string;\r\n  currentUser: User;\r\n}\r\n\r\nexport const Table: React.SFC<TableProps> = ({\r\n  data,\r\n  addExpense,\r\n  editExpense,\r\n  deleteExpense,\r\n  categories,\r\n  currency,\r\n  title,\r\n  currentUser,\r\n  checkUserInGroupExpense,\r\n}) => {\r\n  const getCategoriesLookup = () => {\r\n    const lookup: any = {};\r\n    categories.forEach((category) => {\r\n      lookup[category.id] = category.name;\r\n    });\r\n    return lookup;\r\n  };\r\n  const columns: Array<Column<Expense>> = [\r\n    {\r\n      title: \"Data\",\r\n      field: \"date\",\r\n      editComponent: (props) => (\r\n        <MuiDatePicker\r\n          variant=\"inline\"\r\n          format=\"dd/MM/yyyy\"\r\n          value={props.value}\r\n          onChange={props.onChange}\r\n        />\r\n      ),\r\n      defaultSort: \"desc\",\r\n    },\r\n    {\r\n      title: \"Nazwa\",\r\n      field: \"name\",\r\n    },\r\n    { title: `Wartość (${currency})`, field: \"value\" },\r\n    {\r\n      title: `Wartość na osobę (${currency})`,\r\n      field: \"valuePerUser\",\r\n      editable: \"never\",\r\n    },\r\n    {\r\n      title: \"Kategoria\",\r\n      field: \"category.id\",\r\n      lookup: getCategoriesLookup(),\r\n    },\r\n    {\r\n      title: \"Rozliczenie\",\r\n      field: \"users\",\r\n      render: (rowData) =>\r\n        rowData ? (\r\n          <UsersCheckbox\r\n            checkMap={rowData.users}\r\n            owner={rowData.owner}\r\n            expenseId={rowData.id}\r\n            checkUserInGroupExpense={checkUserInGroupExpense}\r\n          />\r\n        ) : null,\r\n      editable: \"never\",\r\n      customSort: (a, b) => {\r\n        if (a.users && b.users) {\r\n          const valueA = Object.values(a.users).filter((item) => item).length;\r\n          const valueB = Object.values(b.users).filter((item) => item).length;\r\n          return valueA - valueB;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  ];\r\n\r\n  const validate = (data: Expense) => {\r\n    const { name, value, category } = data;\r\n    if (name && value && category) return true;\r\n    toast.error(\"Nazwa, wartość i kategoria są wymagane.\");\r\n    return false;\r\n  };\r\n\r\n  const onAdd = (newData: Expense) => {\r\n    if (validate(newData)) {\r\n      if (!newData.date) newData.date = dateToYYYYMMDD(new Date());\r\n      newData.value = round(newData.value, 2);\r\n      return addExpense(newData);\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const onEdit = (newData: Expense) => {\r\n    if (validate(newData)) return editExpense(newData);\r\n    return Promise.reject();\r\n  };\r\n\r\n  return (\r\n    <MaterialTable\r\n      title={title}\r\n      columns={columns}\r\n      data={data}\r\n      localization={tableLocalization}\r\n      options={{\r\n        actionsColumnIndex: -1,\r\n      }}\r\n      editable={{\r\n        isEditable: (rowData) =>\r\n          rowData.owner?.username === currentUser.username,\r\n        isDeletable: (rowData) =>\r\n          rowData.owner?.username === currentUser.username,\r\n        onRowAdd: (newData) => onAdd(newData),\r\n        onRowUpdate: (newData, oldData) => onEdit(newData),\r\n        onRowDelete: (oldData) => deleteExpense(oldData),\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { Table, TableProps } from \"./Table\";\r\nimport { DatePicker, DatePickerProps } from \"components/shered/DatePicker\";\r\nimport { PieChart } from \"components/shered/PieChart\";\r\nimport { Categories, CategoriesProps } from \"components/shered/Categories\";\r\nimport { Footer, FooterProps } from \"components/shered/Footer/\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      padding: \"2rem\",\r\n      textAlign: \"center\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: \"1rem 0.5rem\",\r\n      },\r\n    },\r\n    sum: {\r\n      margin: \"0.5rem 0\",\r\n      width: \"570px\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        width: \"95vw\",\r\n      },\r\n    },\r\n    pieChartContainer: {\r\n      height: \"400px\",\r\n      width: \"570px\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"90vw\",\r\n        width: \"95vw\",\r\n      },\r\n    },\r\n    flexSpace: {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      flexWrap: \"wrap\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        flexDirection: \"column\",\r\n      },\r\n    },\r\n    flexCenter: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      flexWrap: \"wrap\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        flexDirection: \"column\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport interface ExpensesTabProps\r\n  extends TableProps,\r\n    DatePickerProps,\r\n    CategoriesProps,\r\n    FooterProps {\r\n  sum: number;\r\n}\r\n\r\nexport const ExpensesTab: React.SFC<ExpensesTabProps> = ({\r\n  data,\r\n  addExpense,\r\n  editExpense,\r\n  deleteExpense,\r\n  categories,\r\n  addCategory,\r\n  editCategory,\r\n  deleteCategory,\r\n  sum,\r\n  currency,\r\n  dateFrom,\r\n  dateTo,\r\n  currentUser,\r\n  checkUserInGroupExpense,\r\n  onDatesSubmit,\r\n  walletId,\r\n  walletName,\r\n  isPrivate,\r\n}) => {\r\n  const classes = useStyles();\r\n  const dataForUser = data.filter(\r\n    (item) => item.users && item.users[currentUser.username]\r\n  );\r\n  const sumForUser = dataForUser.length\r\n    ? dataForUser\r\n        .map((item) => (item.valuePerUser ? item.valuePerUser : 0))\r\n        .reduce((prev, curr) => prev + curr)\r\n    : 0;\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.flexSpace}>\r\n        <DatePicker\r\n          dateFrom={dateFrom}\r\n          dateTo={dateTo}\r\n          onDatesSubmit={onDatesSubmit}\r\n        />\r\n        <Categories\r\n          categories={categories}\r\n          addCategory={addCategory}\r\n          editCategory={editCategory}\r\n          deleteCategory={deleteCategory}\r\n        ></Categories>\r\n      </div>\r\n\r\n      {data && !!data.length && (\r\n        <div className={classes.flexCenter}>\r\n          <div>\r\n            <Typography variant=\"h5\" className={classes.sum}>\r\n              Suma ogólna: {sum} {currency}\r\n            </Typography>\r\n            <div className={classes.pieChartContainer}>\r\n              <PieChart data={data} />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <Typography variant=\"h5\" className={classes.sum}>\r\n              Suma Twoich wpłat: {sumForUser} {currency}\r\n            </Typography>\r\n            {!!sumForUser && (\r\n              <div className={classes.pieChartContainer}>\r\n                <PieChart data={dataForUser} isPerUser={true} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <Table\r\n        data={data}\r\n        addExpense={addExpense}\r\n        editExpense={editExpense}\r\n        deleteExpense={deleteExpense}\r\n        categories={categories}\r\n        currency={currency}\r\n        title=\"Historia wydatków\"\r\n        currentUser={currentUser}\r\n        checkUserInGroupExpense={checkUserInGroupExpense}\r\n      />\r\n      <Footer\r\n        walletId={walletId}\r\n        walletName={walletName}\r\n        isPrivate={isPrivate}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport MaterialTable, { Column } from \"material-table\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { tableLocalization } from \"settings/tableLocalization\";\r\nimport { User } from \"interfaces/user\";\r\nimport { checkIfUserExists } from \"services/checkIfUserExists\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      padding: \"2rem\",\r\n      textAlign: \"center\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: \"1rem\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport interface UsersTabProps {\r\n  users: Array<User>;\r\n  addUser: (arg: User) => Promise<any>;\r\n  deleteUser: (arg: User) => Promise<any>;\r\n  title?: string;\r\n}\r\n\r\nexport const UsersTab: React.SFC<UsersTabProps> = ({\r\n  users,\r\n  addUser,\r\n  deleteUser,\r\n  title,\r\n}) => {\r\n  const classes = useStyles();\r\n  const columns: Array<Column<User>> = [\r\n    { title: \"Nazwa użytkownika\", field: \"username\" },\r\n  ];\r\n  const onAdd = (newData: User) =>\r\n    checkIfUserExists(newData.username)\r\n      .then(() => addUser(newData))\r\n      .catch(() => {});\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <MaterialTable\r\n        title={title}\r\n        columns={columns}\r\n        data={users}\r\n        localization={tableLocalization}\r\n        options={{\r\n          actionsColumnIndex: -1,\r\n        }}\r\n        editable={{\r\n          onRowAdd: (newData) => onAdd(newData),\r\n          onRowDelete: (oldData) => deleteUser(oldData),\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { AppBar, Tabs, Tab } from \"@material-ui/core\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { SheredWallet as SheredWalletInterface } from \"interfaces/sheredWallet\";\r\nimport { ExpensesTab } from \"./ExpensesTab\";\r\nimport { UsersTab } from \"./UsersTab\";\r\n\r\nexport interface SheredWalletProps {\r\n  wallet: SheredWalletInterface;\r\n}\r\n\r\nexport const SheredWallet: React.SFC<SheredWalletProps> = ({ wallet }) => {\r\n  const {\r\n    user,\r\n    addCategory,\r\n    editCategory,\r\n    deleteCategory,\r\n    addExpense,\r\n    editExpense,\r\n    deleteExpense,\r\n    addUser,\r\n    deleteUser,\r\n    checkUserInGroupExpense,\r\n    setWalletDataByDate,\r\n  } = useContext<any>(AppContext);\r\n  const [tabIndex, setTabIndex] = React.useState(0);\r\n  const handleChange = (event: React.ChangeEvent<{}>, newTabIndex: number) => {\r\n    setTabIndex(newTabIndex);\r\n  };\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\" color=\"secondary\">\r\n        <Tabs\r\n          value={tabIndex}\r\n          indicatorColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n          onChange={handleChange}\r\n        >\r\n          <Tab label=\"Wydatki\" />\r\n          <Tab label=\"Użytkownicy\" />\r\n        </Tabs>\r\n      </AppBar>\r\n      {tabIndex === 0 && (\r\n        <ExpensesTab\r\n          data={wallet.expenses}\r\n          addExpense={addExpense(wallet.id)}\r\n          editExpense={editExpense(wallet.id)}\r\n          deleteExpense={deleteExpense(wallet.id)}\r\n          categories={wallet.categories}\r\n          addCategory={addCategory(wallet.id)}\r\n          editCategory={editCategory(wallet.id)}\r\n          deleteCategory={deleteCategory(wallet.id)}\r\n          sum={wallet.sumExpenses}\r\n          currency={wallet.currency}\r\n          dateFrom={wallet.dateFrom}\r\n          dateTo={wallet.dateTo}\r\n          currentUser={user}\r\n          checkUserInGroupExpense={checkUserInGroupExpense(wallet.id)}\r\n          onDatesSubmit={setWalletDataByDate(wallet.id)}\r\n          walletId={wallet.id}\r\n          walletName={wallet.name}\r\n          isPrivate={wallet.isPrivate}\r\n        />\r\n      )}\r\n      {tabIndex === 1 && (\r\n        <UsersTab\r\n          users={wallet.users}\r\n          addUser={addUser(wallet.id)}\r\n          deleteUser={deleteUser(wallet.id)}\r\n          title=\"\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    container: {\r\n      width: \"100%\",\r\n      padding: \"2rem\",\r\n      textAlign: \"center\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface WithLoadingProps {}\r\nexport const withLoading = <P extends object>(\r\n  Component: React.ComponentType<P>\r\n): React.FC<P & WithLoadingProps> => (props: WithLoadingProps) => {\r\n  const { loading } = React.useContext<any>(AppContext);\r\n  const classes = useStyles();\r\n  return loading ? (\r\n    <div className={classes.container}>\r\n      <CircularProgress size={60} />\r\n    </div>\r\n  ) : (\r\n    <Component {...(props as P)} />\r\n  );\r\n};\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { PrivateWallet as PrivateWalletInterface } from \"interfaces/privateWallet\";\r\nimport { SheredWallet as SheredWalletInterface } from \"interfaces/sheredWallet\";\r\nimport { PrivateWallet } from \"./PrivateWallet\";\r\nimport { SheredWallet } from \"./SheredWallet\";\r\nimport { withLoading } from \"components/shered/LoadingWrapper\";\r\n\r\nexport interface WalletProps {\r\n  match: { params: { id: number } };\r\n}\r\n\r\nexport const RawWallet: React.SFC<WalletProps> = ({ match: { params } }) => {\r\n  const { getWallet } = useContext<any>(AppContext);\r\n  const [wallet, setWallet] = useState<\r\n    PrivateWalletInterface | SheredWalletInterface\r\n  >(getWallet(params.id));\r\n\r\n  useEffect(() => {\r\n    setWallet(getWallet(params.id));\r\n  }, [params.id, getWallet]);\r\n\r\n  return wallet ? (\r\n    wallet.isPrivate ? (\r\n      <PrivateWallet wallet={wallet as PrivateWalletInterface} />\r\n    ) : (\r\n      <SheredWallet wallet={wallet as SheredWalletInterface} />\r\n    )\r\n  ) : null;\r\n};\r\n\r\nexport const Wallet = withLoading(RawWallet);\r\n","import React from \"react\";\r\nimport MaterialTable, { Column } from \"material-table\";\r\nimport { tableLocalization } from \"settings/tableLocalization\";\r\nimport { checkIfUserExists } from \"services/checkIfUserExists\";\r\n\r\nexport interface NewUser {\r\n  username: string;\r\n  tableData?: { id: number };\r\n}\r\nexport interface AddUsersTableProps {\r\n  users: Array<NewUser>;\r\n  setUsers: (users: Array<NewUser>) => void;\r\n}\r\n\r\nexport const AddUsersTable: React.SFC<AddUsersTableProps> = ({\r\n  users,\r\n  setUsers,\r\n}) => {\r\n  const columns: Array<Column<NewUser>> = [\r\n    { title: \"Nazwa użytkownika\", field: \"username\" },\r\n  ];\r\n\r\n  const addUser = (newData: NewUser) =>\r\n    checkIfUserExists(newData.username)\r\n      .then(() => {\r\n        setUsers([...users, newData]);\r\n      })\r\n      .catch(() => {});\r\n\r\n  const editUser = (newData: NewUser, oldData: any) =>\r\n    checkIfUserExists(newData.username)\r\n      .then(() => {\r\n        const newUsers = [...users];\r\n        //@ts-ignore\r\n        newUsers.find(\r\n          //@ts-ignore\r\n          (user) => user.tableData.id === oldData.tableData.id\r\n        ).username = newData.username;\r\n        setUsers(newUsers);\r\n      })\r\n      .catch(() => {});\r\n\r\n  const deleteUser = (oldData: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      const newUsers = [...users].filter(\r\n        //@ts-ignore\r\n        (user) => user.tableData.id !== oldData.tableData.id\r\n      );\r\n      setUsers(newUsers);\r\n      resolve();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <MaterialTable\r\n      title=\"Dodaj użytkowników\"\r\n      columns={columns}\r\n      data={users}\r\n      localization={tableLocalization}\r\n      options={{\r\n        actionsColumnIndex: -1,\r\n      }}\r\n      editable={{\r\n        onRowAdd: (newData) => addUser(newData),\r\n        onRowUpdate: (newData, oldData) => editUser(newData, oldData),\r\n        onRowDelete: (oldData) => deleteUser(oldData),\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  TextField,\r\n  Radio,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Card,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { PRIVATE, SHERED } from \"utils/constants\";\r\nimport { AddUsersTable, NewUser } from \"./AddUsersTable\";\r\nimport { LoadingButton } from \"components/shered/LoadingButton\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { withLoading } from \"components/shered/LoadingWrapper\";\r\n\r\nconst NAME_ERROR = \"Nazwa portfela jest wymagana.\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      margin: \"2rem\",\r\n      padding: \"1rem 2rem\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        margin: \"0.5rem\",\r\n        padding: \"1rem\",\r\n      },\r\n    },\r\n    radioGroupContainer: {\r\n      padding: \"1rem 0\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      height: \"200px\",\r\n      maxWidth: \"250px\",\r\n      justifyContent: \"space-between\",\r\n    },\r\n    buttonContainer: {\r\n      width: \"100%\",\r\n      textAlign: \"center\",\r\n      padding: \"1rem\",\r\n    },\r\n    loader: {\r\n      marginLeft: \"6px\",\r\n    },\r\n  })\r\n);\r\n\r\nexport interface NewWalletCreatorProps {}\r\n\r\nexport const RawNewWalletCreator: React.SFC<NewWalletCreatorProps> = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [nameError, setNameError] = useState(\"\");\r\n  const [type, setType] = useState(PRIVATE);\r\n  const [users, setUsers] = useState<Array<NewUser>>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { addPrivateWallet, addSheredWallet } = React.useContext<any>(\r\n    AppContext\r\n  );\r\n\r\n  const classes = useStyles();\r\n  const handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setName(event.target.value);\r\n    setNameError(\"\");\r\n  };\r\n  const handleRadioChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setType(event.target.value);\r\n  };\r\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (validate()) {\r\n      setLoading(true);\r\n      if (type === PRIVATE)\r\n        addPrivateWallet(name).catch(() => {\r\n          setLoading(false);\r\n        });\r\n      if (type === SHERED) {\r\n        const usersNames = users.map((user) => user.username);\r\n        addSheredWallet(name, usersNames).catch(() => {\r\n          setLoading(false);\r\n        });\r\n      }\r\n    }\r\n  };\r\n  const validate = () => {\r\n    if (name.trim() === \"\") {\r\n      setNameError(NAME_ERROR);\r\n      return false;\r\n    }\r\n    setNameError(\"\");\r\n    return true;\r\n  };\r\n\r\n  return (\r\n    <Card className={classes.container}>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className={classes.radioGroupContainer}>\r\n          <TextField\r\n            error={!!nameError}\r\n            label=\"Nazwa\"\r\n            value={name}\r\n            onChange={handleNameChange}\r\n            helperText={nameError}\r\n          ></TextField>\r\n          <RadioGroup value={type} onChange={handleRadioChange}>\r\n            <FormControlLabel\r\n              value={PRIVATE}\r\n              control={<Radio />}\r\n              label=\"Portfel prywatny\"\r\n            />\r\n            <FormControlLabel\r\n              value={SHERED}\r\n              control={<Radio />}\r\n              label=\"Portfel współdzielony\"\r\n            />\r\n          </RadioGroup>\r\n        </div>\r\n        {type === SHERED && (\r\n          <AddUsersTable users={users} setUsers={setUsers}></AddUsersTable>\r\n        )}\r\n        <div className={classes.buttonContainer}>\r\n          <LoadingButton type=\"submit\" loading={loading} text=\"Utwórz\" />\r\n        </div>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const NewWalletCreator = withLoading(RawNewWalletCreator);\r\n","export const PRIVATE = \"PRIVATE\";\r\nexport const SHERED = \"SHERED\";\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { LoadingButton } from \"components/shered/LoadingButton\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { routes } from \"App\";\r\nimport { toast } from \"utils/toast\";\r\nimport { AxiosError } from \"axios\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      marginTop: \"0.5rem\",\r\n      width: \"100%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n    },\r\n    button: {\r\n      margin: \"1rem\",\r\n    },\r\n    link: {\r\n      color: theme.palette.secondary.light,\r\n    },\r\n  })\r\n);\r\n\r\nexport const LoginForm = () => {\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const { doLogIn } = React.useContext<any>(AppContext);\r\n  const classes = useStyles();\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    doLogIn(username, password).catch((error: AxiosError) => {\r\n      if (error.response && error.response.status === 401)\r\n        toast.error(\"Niepoprawny login lub hasło.\");\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <div className={classes.container}>\r\n        <form className={classes.container} onSubmit={handleSubmit}>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Logowanie\r\n          </Typography>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"login\"\r\n            label=\"Login\"\r\n            fullWidth\r\n            autoFocus\r\n            required\r\n            onChange={(e) => {\r\n              setUsername(e.currentTarget.value);\r\n            }}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"password\"\r\n            type=\"password\"\r\n            label=\"Hasło\"\r\n            fullWidth\r\n            required\r\n            onChange={(e) => {\r\n              setPassword(e.currentTarget.value);\r\n            }}\r\n          />\r\n          <LoadingButton\r\n            text=\"Zaloguj się\"\r\n            loading={loading}\r\n            type=\"submit\"\r\n            fullWidth\r\n            className={classes.button}\r\n          />\r\n        </form>\r\n        <Typography>\r\n          Nie masz konta?{\" \"}\r\n          <Link to={routes.register} className={classes.link}>\r\n            Zarejestruj się!\r\n          </Link>\r\n        </Typography>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\n\r\nexport interface Error {\r\n  message: string;\r\n}\r\n\r\nexport const ValidationSummary: React.SFC<Error> = ({ message }) => {\r\n  return (\r\n    <div>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n};\r\n","export const regExp = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/;\r\nexport const lowerCase = /^(?=.*[a-z])/;\r\nexport const upperCase = /^(?=.*[A-Z])/;\r\nexport const number = /^(?=.*[0-9])/;\r\nexport const specialChar = /^(?=.*[!@#$%^&*])/;\r\nexport const minimalLength = /(?=.{8,})/;\r\nexport const emailTemplate = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n","import * as React from \"react\";\r\nimport { RouteChildrenProps, Link } from \"react-router-dom\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { LoadingButton } from \"components/shered/LoadingButton\";\r\nimport { ValidationSummary } from \"components/Register/ValidationSummary\";\r\nimport { AppContext } from \"components/Context/DataProvider\";\r\nimport { regExp, emailTemplate } from \"utils/validationPatterns\";\r\nimport { registerUser } from \"services/registerUser\";\r\nimport { setToken } from \"services/auth\";\r\nimport { routes } from \"App\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      marginTop: \"1rem\",\r\n      marginBottom: \"1rem\",\r\n      width: \"100%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      textAlign: \"center\",\r\n    },\r\n    button: {\r\n      margin: \"1rem\",\r\n    },\r\n    arrowContainer: {\r\n      width: \"100%\",\r\n      textAlign: \"left\",\r\n      paddingLeft: \"1rem\",\r\n    },\r\n    link: {\r\n      color: theme.palette.secondary.main,\r\n    },\r\n  })\r\n);\r\n\r\nexport const RegisterForm: React.SFC<RouteChildrenProps> = ({ history }) => {\r\n  const classes = useStyles();\r\n  const { setUsersData } = React.useContext<any>(AppContext);\r\n\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [pass1, setPass1] = React.useState(\"\");\r\n  const [pass2, setPass2] = React.useState(\"\");\r\n  const [error, setError] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const validate = () => {\r\n    if (username === \"\") {\r\n      setError(\"Pole login jest wymagane\");\r\n      return false;\r\n    }\r\n\r\n    if (!emailTemplate.test(email)) {\r\n      setError(\"Niepoprawny adres e-mail\");\r\n      return false;\r\n    }\r\n\r\n    if (pass1 !== pass2) {\r\n      setError(\"Hasła nie są takie same.\");\r\n      return false;\r\n    }\r\n\r\n    if (!regExp.test(pass1)) {\r\n      setError(\r\n        \"Hasło musi mieć minimum 8 znaków i zawierać małą literę [a-z], wielką literę [A-Z], cyfrę [0-9] oraz znak specjalny [!@#$%^&*].\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (validate()) {\r\n      setLoading(true);\r\n      registerUser(username, email, pass1)\r\n        .then(async ({ data }) => {\r\n          await setToken(data);\r\n          setUsersData();\r\n          history.push(routes.newWallet);\r\n        })\r\n        .catch(() => {\r\n          setLoading(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <div className={classes.container}>\r\n        <form className={classes.container} onSubmit={handleSubmit}>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Panel rejestracji\r\n          </Typography>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"username\"\r\n            label=\"Login\"\r\n            type=\"text\"\r\n            required\r\n            fullWidth\r\n            autoFocus\r\n            onChange={(event) => setUsername(event.currentTarget.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"login\"\r\n            label=\"E-mail\"\r\n            type=\"email\"\r\n            required\r\n            fullWidth\r\n            onChange={(event) => setEmail(event.currentTarget.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"password\"\r\n            type=\"password\"\r\n            label=\"Hasło\"\r\n            required\r\n            fullWidth\r\n            onChange={(event) => setPass1(event.currentTarget.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            id=\"password-confirmation\"\r\n            type=\"password\"\r\n            label=\"Potwierdź hasło\"\r\n            required\r\n            fullWidth\r\n            onChange={(event) => setPass2(event.currentTarget.value)}\r\n          />\r\n          <ValidationSummary message={error} />\r\n          <LoadingButton\r\n            text=\"Zarejestruj się\"\r\n            loading={loading}\r\n            type=\"submit\"\r\n            fullWidth\r\n            className={classes.button}\r\n          />\r\n        </form>\r\n        <Typography>\r\n          Masz już konto?{\" \"}\r\n          <Link to={routes.login} className={classes.link}>\r\n            Zaloguj się!\r\n          </Link>\r\n        </Typography>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport { Route, Redirect, RouteProps } from \"react-router-dom\";\r\nimport { isLoggedIn } from \"services/auth\";\r\nimport { routes } from \"App\";\r\n\r\nexport interface ProtectedRouteProps extends RouteProps {}\r\n\r\nexport const ProtectedRoute: React.SFC<ProtectedRouteProps> = (props) => {\r\n  return isLoggedIn() ? <Route {...props} /> : <Redirect to={routes.login} />;\r\n};\r\n","import * as React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { ThemeProvider, CssBaseline } from \"@material-ui/core\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport { theme } from \"./settings/theme\";\r\nimport { DataProvider } from \"components/Context/DataProvider\";\r\nimport { Header } from \"components/shered/Header\";\r\nimport { Menu } from \"components/shered/Menu\";\r\nimport { Wallet } from \"components/Wallet\";\r\nimport { NewWalletCreator } from \"components/NewWalletCreator\";\r\nimport { LoginForm } from \"components/Login/LoginForm\";\r\nimport { RegisterForm } from \"components/Register/RegisterForm\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport format from \"date-fns/format\";\r\nimport plLocale from \"date-fns/locale/pl\";\r\nimport { ProtectedRoute } from \"components/shered/ProtectedRoute\";\r\n\r\nclass PlLocalizedUtils extends DateFnsUtils {\r\n  getDatePickerHeaderText(date: Date) {\r\n    return format(date, \"d MMMM yyyy\", { locale: plLocale });\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <Router basename=\"/ikwita\">\r\n      <ThemeProvider theme={theme}>\r\n        <MuiPickersUtilsProvider utils={PlLocalizedUtils} locale={plLocale}>\r\n          <CssBaseline />\r\n          <DataProvider>\r\n            <div className=\"App\">\r\n              <Header />\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  path={`${routes.wallet}/:id`}\r\n                  render={(routeProps) => (\r\n                    <>\r\n                      <Menu {...routeProps} />\r\n                      <Wallet {...routeProps} />\r\n                    </>\r\n                  )}\r\n                />\r\n                <ProtectedRoute\r\n                  path={routes.newWallet}\r\n                  render={(routeProps) => (\r\n                    <>\r\n                      <Menu {...routeProps} />\r\n                      <NewWalletCreator {...routeProps} />\r\n                    </>\r\n                  )}\r\n                />\r\n                />\r\n                <Route path={routes.login} component={LoginForm} />\r\n                <Route path={routes.register} component={RegisterForm} />\r\n                <ProtectedRoute path={routes.empty} component={() => <div />} />\r\n              </Switch>\r\n            </div>\r\n          </DataProvider>\r\n        </MuiPickersUtilsProvider>\r\n      </ThemeProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nexport const routes = {\r\n  empty: \"/\",\r\n  wallet: \"/wallet\",\r\n  newWallet: \"/new-wallet\",\r\n  login: \"/signin\",\r\n  register: \"/signup\",\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}